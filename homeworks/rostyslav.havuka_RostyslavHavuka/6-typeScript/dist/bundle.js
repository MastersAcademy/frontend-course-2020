(()=>{var e=document.querySelector("[data-score]"),t=document.querySelector("[data-cube-score]"),r=document.querySelector("[data-key]"),s=document.querySelector("[data-progress-bar]"),i=document.querySelector("[data-key-start]"),a=document.querySelector("[data-key-stop]"),o=document.querySelector("[data-key-again]"),n=document.getElementById("box");new(function(){function e(e,t,r,s,i,a,o,n){this.scoreElement=e,this.cubeScoreElement=t,this.keyElement=r,this.progressBarElement=s,this.square=i,this.keyStart=a,this.keyStop=o,this.keyAgain=n,this.currentKey="",this.score=100,this.gameState=!1,this.timerProgressBar=0}return e.prototype.start=function(){this.randomKeyInterval(),this.subscribeOnKeyPress(),this.subscribeOnKeyStartClick(),this.subscribeOnKeyStopClick(),this.subscribeOnKeyAgainClick()},e.prototype.subscribeOnKeyStartClick=function(){var e=this;this.keyStart.addEventListener("click",(function(){!1===e.gameState&&(e.squareWidth=1,e.progressBar(),e.progressBarElement.classList.remove("hidden"),clearInterval(e.intervalId),e.intervalId=setInterval((function(){e.subScoreTimer(e.score),e.sizeDown(),e.squareWidth=1,e.progressBar()}),3e3)),e.gameState=!0}))},e.prototype.subscribeOnKeyStopClick=function(){var e=this;this.keyStop.addEventListener("click",(function(){e.gameState=!1,e.progressBarElement.classList.add("hidden"),clearInterval(e.intervalStatusBarId),e.timerProgressBar=0,e.squareWidth=99,clearInterval(e.intervalId),alert("your Score:"+e.score),e.score=100,e.setCubeScore(e.score),e.resetScore("")}))},e.prototype.subscribeOnKeyAgainClick=function(){var e=this;this.keyAgain.addEventListener("click",(function(){e.gameAgain()}))},e.prototype.gameAgain=function(){var e=this;!0===this.gameState&&(this.score=100,this.squareWidth=1,this.progressBar(),this.setCubeScore(this.score),this.resetScore(""),clearInterval(this.intervalId),this.intervalId=setInterval((function(){e.subScoreTimer(e.score),e.sizeDown(),e.squareWidth=1,e.progressBar()}),3e3),this.gameState=!0)},e.prototype.randomKeyInterval=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890",t=0;t<1;t++)this.currentKey=e.charAt(Math.floor(Math.random()*e.length)),this.keyElement.innerText=this.currentKey.toUpperCase()},e.prototype.pressCorrectKey=function(){!0===this.gameState?(this.randomKeyInterval(),this.addScore(),this.setNewInterval(),this.sizeUp(),clearInterval(this.intervalStatusBarId),this.squareWidth=1,this.timerProgressBar=0,this.progressBar()):alert('Please press "Start"')},e.prototype.pressUncorrectKey=function(){!0===this.gameState?(this.subScore(),this.randomKeyInterval(),this.setNewInterval(),this.sizeDown(),clearInterval(this.intervalStatusBarId),this.squareWidth=1,this.timerProgressBar=0,this.progressBar()):alert('Please press "Start"')},e.prototype.setKey=function(e){e===this.keyElement.textContent.toLowerCase()?this.pressCorrectKey():this.pressUncorrectKey()},e.prototype.setNewInterval=function(){var e=this;!0===this.gameState&&(clearInterval(this.intervalId),this.intervalId=setInterval((function(){e.subScoreTimer(e.score),e.sizeDown(),clearInterval(e.intervalStatusBarId),e.squareWidth=1,e.timerProgressBar=0,e.progressBar()}),3e3))},e.prototype.addScore=function(){var e=this.randomNumber(5,10);this.score=this.score+e,this.setCubeScore(this.score),this.scoreElement.innerText="+"+e},e.prototype.subScore=function(){var e=this.randomNumber(20,25);this.score=this.score-e,this.setCubeScore(this.score),this.scoreElement.innerText="-"+e},e.prototype.subScoreTimer=function(e){var t=this.randomNumber(10,15);this.score=this.score-t,this.finishGame(),this.setCubeScore(this.score),this.scoreElement.innerText="-"+t},e.prototype.subscribeOnKeyPress=function(){var e=this;window.addEventListener("keypress",(function(t){e.setKey(t.key),e.finishGame()}))},e.prototype.randomNumber=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.prototype.sizeUp=function(){var e=parseInt(this.square.style.width),t=parseInt(this.square.style.height);this.square.style.width=e+3+"px",this.square.style.height=t+3+"px"},e.prototype.sizeDown=function(){var e=parseInt(this.square.style.width),t=parseInt(this.square.style.height);this.square.style.width=e-2+"px",this.square.style.height=t-2+"px"},e.prototype.progressBar=function(){var e=this;0==this.timerProgressBar&&(this.timerProgressBar=1,this.squareWidth=1,this.intervalStatusBarId=setInterval((function(){e.squareWidth>=100?(clearInterval(e.intervalStatusBarId),e.timerProgressBar=0):(e.squareWidth++,e.progressBarElement.style.width=e.squareWidth+"%")}),30))},e.prototype.finishGame=function(){this.score>=200&&(alert("You WON! Your Score: 200"),this.gameAgain()),this.score<=0&&(alert("Try Again! Your Score:0"),this.gameAgain())},e.prototype.setCubeScore=function(e){return this.cubeScoreElement.innerText=e.toString()},e.prototype.resetScore=function(e){return this.scoreElement.innerText=e},e}())(e,t,r,s,n,i,a,o).start()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly82LXR5cGVzY3JpcHQvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsic2NvcmVFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY3ViZVNjb3JlRWxlbWVudCIsImtleUVsZW1lbnQiLCJwcm9ncmVzc0JhckVsZW1lbnQiLCJrZXlTdGFydCIsImtleVN0b3AiLCJrZXlBZ2FpbiIsInNxdWFyZSIsImdldEVsZW1lbnRCeUlkIiwiY3VycmVudEtleSIsInNjb3JlIiwiZ2FtZVN0YXRlIiwidGltZXJQcm9ncmVzc0JhciIsInN0YXJ0IiwidGhpcyIsInJhbmRvbUtleUludGVydmFsIiwic3Vic2NyaWJlT25LZXlQcmVzcyIsInN1YnNjcmliZU9uS2V5U3RhcnRDbGljayIsInN1YnNjcmliZU9uS2V5U3RvcENsaWNrIiwic3Vic2NyaWJlT25LZXlBZ2FpbkNsaWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNxdWFyZVdpZHRoIiwicHJvZ3Jlc3NCYXIiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJjbGVhckludGVydmFsIiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwic3ViU2NvcmVUaW1lciIsInNpemVEb3duIiwiYWRkIiwiaW50ZXJ2YWxTdGF0dXNCYXJJZCIsImFsZXJ0Iiwic2V0Q3ViZVNjb3JlIiwicmVzZXRTY29yZSIsImdhbWVBZ2FpbiIsInBvc3NpYmxlIiwiaSIsImNoYXJBdCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCIsImlubmVyVGV4dCIsInRvVXBwZXJDYXNlIiwicHJlc3NDb3JyZWN0S2V5IiwiYWRkU2NvcmUiLCJzZXROZXdJbnRlcnZhbCIsInNpemVVcCIsInByZXNzVW5jb3JyZWN0S2V5Iiwic3ViU2NvcmUiLCJzZXRLZXkiLCJrZXkiLCJ0ZXh0Q29udGVudCIsInRvTG93ZXJDYXNlIiwicm5kb20iLCJyYW5kb21OdW1iZXIiLCJmaW5pc2hHYW1lIiwid2luZG93IiwibWluIiwibWF4Iiwi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LEtBQUtiLGlCQUFpQjBDLFVBQVlqQyxFQUFNdUQsWUFHekMsWUFBQS9CLFdBQVIsU0FBbUJnQyxHQUNsQixPQUFPcEQsS0FBS2hCLGFBQWE2QyxVQUFZdUIsR0FFeEMsRUFqT0EsR0FtT2EsQ0FBU3BFLEVBQWNHLEVBQWtCQyxFQUFZQyxFQUFvQkksRUFBUUgsRUFBVUMsRUFBU0MsR0FFNUdPLFMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2NvcmVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtc2NvcmVdJykgYXMgSFRNTEhlYWRpbmdFbGVtZW50O1xuY29uc3QgY3ViZVNjb3JlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWN1YmUtc2NvcmVdJykgYXMgSFRNTERpdkVsZW1lbnQ7XG5jb25zdCBrZXlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEta2V5XScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5jb25zdCBwcm9ncmVzc0JhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1wcm9ncmVzcy1iYXJdJykgYXMgSFRNTEVsZW1lbnQ7XG5jb25zdCBrZXlTdGFydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWtleS1zdGFydF0nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbmNvbnN0IGtleVN0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1rZXktc3RvcF0nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbmNvbnN0IGtleUFnYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEta2V5LWFnYWluXScpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJib3hcIikgYXMgSFRNTEVsZW1lbnQ7XG5cbmNsYXNzIEdhbWUge1xuICBwcml2YXRlIGN1cnJlbnRLZXk6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIHNjb3JlOiBudW1iZXIgPSAxMDA7XG4gIHByaXZhdGUgaW50ZXJ2YWxJZDogTm9kZUpTLlRpbWVvdXQ7XG4gIHByaXZhdGUgaW50ZXJ2YWxTdGF0dXNCYXJJZDogTm9kZUpTLlRpbWVvdXQ7XG4gIHByaXZhdGUgZ2FtZVN0YXRlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgdGltZXJQcm9ncmVzc0JhcjogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBzcXVhcmVXaWR0aDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgc2NvcmVFbGVtZW50OiBIVE1MSGVhZGluZ0VsZW1lbnQsXG4gICAgcHJpdmF0ZSBjdWJlU2NvcmVFbGVtZW50OiBIVE1MRGl2RWxlbWVudCxcbiAgICBwcml2YXRlIGtleUVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgcHJpdmF0ZSBwcm9ncmVzc0JhckVsZW1lbnQ/OiBIVE1MRWxlbWVudCxcbiAgICBwcml2YXRlIHNxdWFyZT86IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUga2V5U3RhcnQ/OiBIVE1MQnV0dG9uRWxlbWVudCxcbiAgICBwcml2YXRlIGtleVN0b3A/OiBIVE1MQnV0dG9uRWxlbWVudCxcbiAgICBwcml2YXRlIGtleUFnYWluPzogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgKSB7IH1cblxuICBzdGFydCgpIHtcbiAgICB0aGlzLnJhbmRvbUtleUludGVydmFsKClcbiAgICB0aGlzLnN1YnNjcmliZU9uS2V5UHJlc3MoKVxuICAgIHRoaXMuc3Vic2NyaWJlT25LZXlTdGFydENsaWNrKCk7XG4gICAgdGhpcy5zdWJzY3JpYmVPbktleVN0b3BDbGljaygpO1xuICAgIHRoaXMuc3Vic2NyaWJlT25LZXlBZ2FpbkNsaWNrKCk7XG4gIH1cblxuICBwcml2YXRlIHN1YnNjcmliZU9uS2V5U3RhcnRDbGljaygpOiB2b2lkIHtcbiAgICB0aGlzLmtleVN0YXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLmdhbWVTdGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuc3F1YXJlV2lkdGggPSAxO1xuICAgICAgdGhpcy5wcm9ncmVzc0JhcigpO1xuICAgICAgdGhpcy5wcm9ncmVzc0JhckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XG4gICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc3ViU2NvcmVUaW1lcih0aGlzLnNjb3JlKTtcbiAgICAgICAgdGhpcy5zaXplRG93bigpO1xuICAgICAgICB0aGlzLnNxdWFyZVdpZHRoID0gMTtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhcigpO1xuICAgICAgfSwgMzAwMCk7XG4gICAgfVxuICAgIHRoaXMuZ2FtZVN0YXRlID0gdHJ1ZTtcbiAgICB9KVxuICB9XG5cbiAgcHJpdmF0ZSBzdWJzY3JpYmVPbktleVN0b3BDbGljaygpOiB2b2lkIHtcbiAgICB0aGlzLmtleVN0b3AuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKTogdm9pZCA9PiB7XG4gICAgdGhpcy5nYW1lU3RhdGUgPSBmYWxzZTtcbiAgICB0aGlzLnByb2dyZXNzQmFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxTdGF0dXNCYXJJZCk7XG4gICAgdGhpcy50aW1lclByb2dyZXNzQmFyID0gMDtcbiAgICB0aGlzLnNxdWFyZVdpZHRoID0gOTk7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpO1xuICAgIGFsZXJ0KCd5b3VyIFNjb3JlOicgKyB0aGlzLnNjb3JlKTtcbiAgICB0aGlzLnNjb3JlID0gMTAwO1xuICAgIHRoaXMuc2V0Q3ViZVNjb3JlKHRoaXMuc2NvcmUpO1xuICAgIHRoaXMucmVzZXRTY29yZSgnJyk7XG4gICAgfSlcbiAgfVxuICBwcml2YXRlIHN1YnNjcmliZU9uS2V5QWdhaW5DbGljaygpOiB2b2lkIHtcbiAgICB0aGlzLmtleUFnYWluLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMuZ2FtZUFnYWluKClcbiAgICB9KVxuICB9XG5cbiAgcHJpdmF0ZSBnYW1lQWdhaW4oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlID09PSB0cnVlKSB7XG4gICAgICB0aGlzLnNjb3JlID0gMTAwO1xuICAgICAgdGhpcy5zcXVhcmVXaWR0aCA9IDE7XG4gICAgICB0aGlzLnByb2dyZXNzQmFyKCk7XG4gICAgICB0aGlzLnNldEN1YmVTY29yZSh0aGlzLnNjb3JlKTtcbiAgICAgIHRoaXMucmVzZXRTY29yZSgnJyk7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XG4gICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc3ViU2NvcmVUaW1lcih0aGlzLnNjb3JlKTtcbiAgICAgICAgdGhpcy5zaXplRG93bigpO1xuICAgICAgICB0aGlzLnNxdWFyZVdpZHRoID0gMTtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhcigpO1xuICAgICAgfSwgMzAwMCk7XG4gICAgICB0aGlzLmdhbWVTdGF0ZSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByYW5kb21LZXlJbnRlcnZhbCgpOiB2b2lkIHtcbiAgICBsZXQgcG9zc2libGU6IHN0cmluZyA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE7IGkrKykge1xuICAgICAgdGhpcy5jdXJyZW50S2V5ID0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpO1xuICAgICAgdGhpcy5rZXlFbGVtZW50LmlubmVyVGV4dCA9IHRoaXMuY3VycmVudEtleS50b1VwcGVyQ2FzZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcHJlc3NDb3JyZWN0S2V5KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmdhbWVTdGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5yYW5kb21LZXlJbnRlcnZhbCgpO1xuICAgICAgdGhpcy5hZGRTY29yZSgpO1xuICAgICAgdGhpcy5zZXROZXdJbnRlcnZhbCgpO1xuICAgICAgdGhpcy5zaXplVXAoKTtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbFN0YXR1c0JhcklkKTtcbiAgICAgIHRoaXMuc3F1YXJlV2lkdGggPSAxO1xuICAgICAgdGhpcy50aW1lclByb2dyZXNzQmFyID0gMDtcbiAgICAgIHRoaXMucHJvZ3Jlc3NCYXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoJ1BsZWFzZSBwcmVzcyBcIlN0YXJ0XCInKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHByZXNzVW5jb3JyZWN0S2V5KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmdhbWVTdGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5zdWJTY29yZSgpO1xuICAgICAgdGhpcy5yYW5kb21LZXlJbnRlcnZhbCgpO1xuICAgICAgdGhpcy5zZXROZXdJbnRlcnZhbCgpO1xuICAgICAgdGhpcy5zaXplRG93bigpO1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsU3RhdHVzQmFySWQpO1xuICAgICAgdGhpcy5zcXVhcmVXaWR0aCA9IDE7XG4gICAgICB0aGlzLnRpbWVyUHJvZ3Jlc3NCYXIgPSAwO1xuICAgICAgdGhpcy5wcm9ncmVzc0JhcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydCgnUGxlYXNlIHByZXNzIFwiU3RhcnRcIicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0S2V5KGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGtleSA9PT0gdGhpcy5rZXlFbGVtZW50LnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIHRoaXMucHJlc3NDb3JyZWN0S2V5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHJlc3NVbmNvcnJlY3RLZXkoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldE5ld0ludGVydmFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmdhbWVTdGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpO1xuICAgICAgdGhpcy5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB0aGlzLnN1YlNjb3JlVGltZXIodGhpcy5zY29yZSk7XG4gICAgICAgIHRoaXMuc2l6ZURvd24oKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsU3RhdHVzQmFySWQpO1xuICAgICAgICB0aGlzLnNxdWFyZVdpZHRoID0gMTtcbiAgICAgICAgdGhpcy50aW1lclByb2dyZXNzQmFyID0gMDtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhcigpO1xuICAgICAgfSwgMzAwMCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRTY29yZSgpOiB2b2lkIHtcbiAgICBsZXQgcm5kb206IG51bWJlciA9IHRoaXMucmFuZG9tTnVtYmVyKDUsIDEwKVxuICAgIHRoaXMuc2NvcmUgPSB0aGlzLnNjb3JlICsgcm5kb207XG4gICAgdGhpcy5zZXRDdWJlU2NvcmUodGhpcy5zY29yZSk7XG4gICAgdGhpcy5zY29yZUVsZW1lbnQuaW5uZXJUZXh0ID0gYCske3JuZG9tfWA7XG4gIH1cblxuICBwcml2YXRlIHN1YlNjb3JlKCk6IHZvaWQge1xuICAgIGxldCBybmRvbTogbnVtYmVyID0gdGhpcy5yYW5kb21OdW1iZXIoMjAsIDI1KTtcbiAgICB0aGlzLnNjb3JlID0gdGhpcy5zY29yZSAtIHJuZG9tO1xuICAgIHRoaXMuc2V0Q3ViZVNjb3JlKHRoaXMuc2NvcmUpO1xuICAgIHRoaXMuc2NvcmVFbGVtZW50LmlubmVyVGV4dCA9IGAtJHtybmRvbX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJTY29yZVRpbWVyKHNjb3JlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgcm5kb206IG51bWJlciA9IHRoaXMucmFuZG9tTnVtYmVyKDEwLCAxNSk7XG4gICAgdGhpcy5zY29yZSA9IHRoaXMuc2NvcmUgLSBybmRvbTtcbiAgICB0aGlzLmZpbmlzaEdhbWUoKTtcbiAgICB0aGlzLnNldEN1YmVTY29yZSh0aGlzLnNjb3JlKTtcbiAgICB0aGlzLnNjb3JlRWxlbWVudC5pbm5lclRleHQgPSBgLSR7cm5kb219YDtcbiAgfVxuXG4gIHByaXZhdGUgc3Vic2NyaWJlT25LZXlQcmVzcygpOiB2b2lkIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoa2V5KSA9PiB7XG4gICAgICB0aGlzLnNldEtleShrZXkua2V5KTtcbiAgICAgIHRoaXMuZmluaXNoR2FtZSgpO1xuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIHJhbmRvbU51bWJlcihtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbiAgfVxuXG4gIHByaXZhdGUgc2l6ZVVwKCk6IHZvaWQge1xuICAgIGxldCB3aWR0aDogbnVtYmVyID0gcGFyc2VJbnQodGhpcy5zcXVhcmUuc3R5bGUud2lkdGgpO1xuICAgIGxldCBoZWlnaHQ6IG51bWJlciA9IHBhcnNlSW50KHRoaXMuc3F1YXJlLnN0eWxlLmhlaWdodCk7XG4gICAgdGhpcy5zcXVhcmUuc3R5bGUud2lkdGggPSAod2lkdGggKyAzKSArIFwicHhcIjtcbiAgICB0aGlzLnNxdWFyZS5zdHlsZS5oZWlnaHQgPSAoaGVpZ2h0ICsgMykgKyBcInB4XCI7XG4gIH1cblxuICBwcml2YXRlIHNpemVEb3duKCk6IHZvaWQge1xuICAgIGxldCB3aWR0aDogbnVtYmVyID0gcGFyc2VJbnQodGhpcy5zcXVhcmUuc3R5bGUud2lkdGgpO1xuICAgIGxldCBoZWlnaHQ6IG51bWJlciA9IHBhcnNlSW50KHRoaXMuc3F1YXJlLnN0eWxlLmhlaWdodCk7XG4gICAgdGhpcy5zcXVhcmUuc3R5bGUud2lkdGggPSAod2lkdGggLSAyKSArIFwicHhcIjtcbiAgICB0aGlzLnNxdWFyZS5zdHlsZS5oZWlnaHQgPSAoaGVpZ2h0IC0gMikgKyBcInB4XCI7XG4gIH1cblxuICBwcml2YXRlIHByb2dyZXNzQmFyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRpbWVyUHJvZ3Jlc3NCYXIgPT0gMCkge1xuICAgICAgdGhpcy50aW1lclByb2dyZXNzQmFyID0gMTtcbiAgICAgIHRoaXMuc3F1YXJlV2lkdGggPSAxO1xuICAgICAgdGhpcy5pbnRlcnZhbFN0YXR1c0JhcklkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zcXVhcmVXaWR0aCA+PSAxMDApIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxTdGF0dXNCYXJJZCk7XG4gICAgICAgICAgdGhpcy50aW1lclByb2dyZXNzQmFyID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNxdWFyZVdpZHRoKys7XG4gICAgICAgICAgdGhpcy5wcm9ncmVzc0JhckVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLnNxdWFyZVdpZHRoICsgXCIlXCI7XG4gICAgICAgIH1cbiAgICAgIH0sIDMwKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZpbmlzaEdhbWUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc2NvcmUgPj0gMjAwKSB7XG4gICAgICBhbGVydCgnWW91IFdPTiEgWW91ciBTY29yZTogMjAwJyk7XG4gICAgICB0aGlzLmdhbWVBZ2FpbigpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zY29yZSA8PSAwKSB7XG4gICAgICBhbGVydCgnVHJ5IEFnYWluISBZb3VyIFNjb3JlOjAnKTtcbiAgICAgIHRoaXMuZ2FtZUFnYWluKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXRDdWJlU2NvcmUoc2NvcmU6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmN1YmVTY29yZUVsZW1lbnQuaW5uZXJUZXh0ID0gc2NvcmUudG9TdHJpbmcoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRTY29yZShzdHJpbmc6IHN0cmluZykge1xuICAgcmV0dXJuIHRoaXMuc2NvcmVFbGVtZW50LmlubmVyVGV4dCA9IHN0cmluZztcbiAgfVxufVxuXG5jb25zdCBnYW1lID0gbmV3IEdhbWUoc2NvcmVFbGVtZW50LCBjdWJlU2NvcmVFbGVtZW50LCBrZXlFbGVtZW50LCBwcm9ncmVzc0JhckVsZW1lbnQsIHNxdWFyZSwga2V5U3RhcnQsIGtleVN0b3AsIGtleUFnYWluKTtcblxuZ2FtZS5zdGFydCgpOyJdLCJzb3VyY2VSb290IjoiIn0=