(()=>{"use strict";var t=document.querySelector("[data-score]"),e=document.querySelector("[data-cube-score]"),i=document.querySelector("[data-cube]"),n=document.querySelector("[data-key]"),s=document.querySelector("[data-notification]"),o=document.querySelector("[data-progress-top]"),r=document.querySelector("[data-progress-right]"),a=document.querySelector("[data-progress-left]"),c=document.querySelector("[data-progress-bottom]"),h=document.querySelector("[data-start]"),l=document.querySelector("[data-stop]"),u=document.querySelector("[data-new]"),d=new(function(){function u(t,e,i,n,s,o,r,a,c,h){var l=this;this.scoreElement=t,this.cubeScoreElement=e,this.cubeElement=i,this.keyElement=n,this.progressBottom=s,this.progressLeft=o,this.progressTop=r,this.progressRight=a,this.startBtn=c,this.stoptBtn=h,this.score=100,this.interval=2e3,this.characters="ABCDEFGHIJKLMNOPQRSTUVWXYZ",this.charactersLength=this.characters.length,this.randomCharacters="",this.isKeyPress=!1,this.submitting=function(t){t.key===l.randomCharacters.toLocaleLowerCase()?l.ganeratePoint(!0):(l.isKeyPress=!0,l.ganeratePoint(!1))}}return u.prototype.counting=function(){var t=this;setTimeout((function(){return s.textContent="1"}),500),setTimeout((function(){return s.textContent="2"}),1e3),setTimeout((function(){return s.textContent="3"}),1500),setTimeout((function(){document.addEventListener("keypress",t.submitting),s.textContent="Start typing!"}),2e3),setTimeout((function(){return s.textContent=""}),3e3)},u.prototype.cycleProgressAnimation=function(){var t=this;this.animationTimer=setInterval((function(){t.startAnimation()}),this.interval)},u.prototype.generateLetter=function(){var t=Math.floor(Math.random()*this.charactersLength+1);this.randomCharacters=this.characters[t-1],n.textContent=this.randomCharacters},u.prototype.checkingScore=function(e){e>=200||e<=0?(this.stopGame(),t.textContent=e>=200?"You Win!":"You Lose!",h.disabled=!0,l.disabled=!0):this.restartCycle()},u.prototype.ganeratePoint=function(n){if(n){var s=5,o=10,r=Math.floor(Math.random()*(o-s+1)+s);this.score=this.score+r,i.style.width=this.score+"px",i.style.height=this.score+"px",e.textContent="+"+r,t.textContent=""+this.score,this.checkingScore(this.score)}else s=void 0,o=void 0,this.isKeyPress?(s=20,o=25):(s=10,o=15),r=Math.floor(Math.random()*(o-s+1)+s),this.score=this.score-r,i.style.width=this.score+"px",i.style.height=this.score+"px",this.isKeyPress=!1,e.textContent="-"+r,t.textContent=""+this.score,this.checkingScore(this.score)},u.prototype.stopAnimation=function(){c.style.transition="none",a.style.transition="none",o.style.transition="none",r.style.transition="none",c.style.width="0",a.style.height="0",o.style.width="0",r.style.height="0",setTimeout((function(){c.style.transition=".48s all linear",a.style.transition=".48s all linear",o.style.transition=".48s all linear",r.style.transition=".48s all linear"}),40)},u.prototype.startAnimation=function(){var t=this;n.classList.replace("hidden","animated"),n.classList.replace("hidden-animated","animated"),this.generateLetter(),this.timerBottom=setTimeout((function(){return c.style.width="100%"}),50),this.timerleft=setTimeout((function(){return a.style.height="100%"}),480),this.timerTop=setTimeout((function(){return o.style.width="100%"}),960),this.timerRight=setTimeout((function(){r.style.height="100%",n.classList.replace("animated-on-press","hidden-animated"),n.classList.replace("animated","hidden-animated")}),1440),this.disableAnimation=setTimeout((function(){t.stopAnimation(),t.ganeratePoint(!1)}),1920)},u.prototype.stoppingTimers=function(){clearInterval(this.disableAnimation),clearInterval(this.animationTimer),clearInterval(this.timerRight),clearInterval(this.timerTop),clearInterval(this.timerleft),clearInterval(this.timerBottom)},u.prototype.restartCycle=function(){var t=this;n.textContent="",n.classList.contains("animated-on-press")?n.classList.replace("animated-on-press","animated"):n.classList.replace("animated","animated-on-press"),this.stopAnimation(),setTimeout((function(){t.stoppingTimers(),t.startAnimation(),t.cycleProgressAnimation()}),50)},u.prototype.start=function(){this.counting(),this.cycleProgressAnimation(),s.textContent=""},u.prototype.stopGame=function(){n.textContent="",s.textContent="",this.stoppingTimers(),c.style.width="0",this.stopAnimation(),document.removeEventListener("keypress",this.submitting)},u.prototype.restart=function(){this.score=100,t.textContent="100",e.textContent="0",i.style.width="100px",i.style.height="100px",this.stopGame()},u}())(t,e,i,n,c,a,o,r,h,l);h.addEventListener("click",(function(){d.start(),h.disabled=!0,setTimeout((function(){return l.disabled=!1}),2e3)})),l.addEventListener("click",(function(){h.disabled=!1,l.disabled=!0,d.stopGame()})),u.addEventListener("click",(function(){l.disabled=!0,h.disabled=!1,d.restart()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly82LXR5cGVzY3JpcHQvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsic2NvcmVFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY3ViZVNjb3JlRWxlbWVudCIsImN1YmVFbGVtZW50Iiwia2V5RWxlbWVudCIsIm5vdGlmaWNhdGlvbiIsInByb2dyZXNzVG9wIiwicHJvZ3Jlc3NSaWdodCIsInByb2dyZXNzTGVmdCIsInByb2dyZXNzQm90dG9tIiwic3RhcnRCdG4iLCJzdG9wQnRuIiwibmV3R2FtZUJ0biIsImdhbWUiLCJHYW1lIiwic3RvcHRCdG4iLCJfdGhpcyIsInRoaXMiLCJzY29yZSIsImludGVydmFsIiwiY2hhcmFjdGVycyIsImNoYXJhY3RlcnNMZW5ndGgiLCJsZW5ndGgiLCJyYW5kb21DaGFyYWN0ZXJzIiwiaXNLZXlQcmVzcyIsInN1Ym1pdHRpbmciLCJlIiwia2V5IiwidG9Mb2NhbGVMb3dlckNhc2UiLCJnYW5lcmF0ZVBvaW50IiwicHJvdG90eXBlIiwiY291bnRpbmciLCJzZXRUaW1lb3V0IiwidGV4dENvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiY3ljbGVQcm9ncmVzc0FuaW1hdGlvbiIsImFuaW1hdGlvblRpbWVyIiwic2V0SW50ZXJ2YWwiLCJzdGFydEFuaW1hdGlvbiIsImdlbmVyYXRlTGV0dGVyIiwiaW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjaGVja2luZ1Njb3JlIiwiY3VycmVudFNjb3JlIiwic3RvcEdhbWUiLCJkaXNhYmxlZCIsInJlc3RhcnRDeWNsZSIsImlzQ29ycmVjdEtleSIsIm1pbiIsIm1heCIsInBvaW50Iiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsInN0b3BBbmltYXRpb24iLCJ0cmFuc2l0aW9uIiwiY2xhc3NMaXN0IiwicmVwbGFjZSIsInRpbWVyQm90dG9tIiwidGltZXJsZWZ0IiwidGltZXJUb3AiLCJ0aW1lclJpZ2h0IiwiZGlzYWJsZUFuaW1hdGlvbiIsInN0b3BwaW5nVGltZXJzIiwiY2xlYXJJbnRlcnZhbCIsImNvbnRhaW5zIiwic3RhcnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVzdGFydCJdLCJtYXBwaW5ncyI6Im1CQUVBLElBQUlBLEVBQWVDLFNBQVNDLGNBQWMsZ0JBQ3RDQyxFQUFtQkYsU0FBU0MsY0FBYyxxQkFDMUNFLEVBQWNILFNBQVNDLGNBQWMsZUFDckNHLEVBQWFKLFNBQVNDLGNBQWMsY0FDcENJLEVBQWVMLFNBQVNDLGNBQWMsdUJBRXRDSyxFQUFjTixTQUFTQyxjQUFjLHVCQUNyQ00sRUFBZ0JQLFNBQVNDLGNBQWMseUJBQ3ZDTyxFQUFlUixTQUFTQyxjQUFjLHdCQUN0Q1EsRUFBaUJULFNBQVNDLGNBQWMsMEJBRXhDUyxFQUFXVixTQUFTQyxjQUFjLGdCQUNsQ1UsRUFBVVgsU0FBU0MsY0FBYyxlQUNqQ1csRUFBYVosU0FBU0MsY0FBYyxjQTRNcENZLEVBQU8sSUEzTWUsV0FDdEIsU0FBU0MsRUFBS2YsRUFBY0csRUFBa0JDLEVBQWFDLEVBQVlLLEVBQWdCRCxFQUFjRixFQUFhQyxFQUFlRyxFQUFVSyxHQUN2SSxJQUFJQyxFQUFRQyxLQUNaQSxLQUFLbEIsYUFBZUEsRUFDcEJrQixLQUFLZixpQkFBbUJBLEVBQ3hCZSxLQUFLZCxZQUFjQSxFQUNuQmMsS0FBS2IsV0FBYUEsRUFDbEJhLEtBQUtSLGVBQWlCQSxFQUN0QlEsS0FBS1QsYUFBZUEsRUFDcEJTLEtBQUtYLFlBQWNBLEVBQ25CVyxLQUFLVixjQUFnQkEsRUFDckJVLEtBQUtQLFNBQVdBLEVBQ2hCTyxLQUFLRixTQUFXQSxFQUVoQkUsS0FBS0MsTUFBUSxJQUNiRCxLQUFLRSxTQUFXLElBQ2hCRixLQUFLRyxXQUFhLDZCQUNsQkgsS0FBS0ksaUJBQW1CSixLQUFLRyxXQUFXRSxPQUN4Q0wsS0FBS00saUJBQW1CLEdBQ3hCTixLQUFLTyxZQUFhLEVBRWxCUCxLQUFLUSxXQUFhLFNBQVVDLEdBQ1BBLEVBQUVDLE1BQ0lYLEVBQU1PLGlCQUFpQkssb0JBRTFDWixF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LFdBQ25CbkQsS0FBS2MsV0FDTGQsS0FBS2tCLHlCQUNMOUIsRUFBYTRCLFlBQWMsSUFFL0JuQixFQUFLZ0IsVUFBVWdCLFNBQVcsV0FDdEIxQyxFQUFXNkIsWUFBYyxHQUN6QjVCLEVBQWE0QixZQUFjLEdBQzNCaEIsS0FBS2dELGlCQUNMeEQsRUFBZTRDLE1BQU1DLE1BQVEsSUFDN0JyQyxLQUFLdUMsZ0JBQ0x4RCxTQUFTcUUsb0JBQW9CLFdBQVlwRCxLQUFLUSxhQUVsRFgsRUFBS2dCLFVBQVV3QyxRQUFVLFdBQ3JCckQsS0FBS0MsTUFBUSxJQUNibkIsRUFBYWtDLFlBQWMsTUFDM0IvQixFQUFpQitCLFlBQWMsSUFDL0I5QixFQUFZa0QsTUFBTUMsTUFBUSxRQUMxQm5ELEVBQVlrRCxNQUFNRSxPQUFTLFFBQzNCdEMsS0FBSzZCLFlBRUZoQyxFQXpNYyxHQTJNZCxDQUFTZixFQUFjRyxFQUFrQkMsRUFBYUMsRUFBWUssRUFBZ0JELEVBQWNGLEVBQWFDLEVBQWVHLEVBQVVDLEdBZ0JqSkQsRUFBU3dCLGlCQUFpQixTQWYxQixXQUNJckIsRUFBS3VELFFBQ0wxRCxFQUFTcUMsVUFBVyxFQUNwQmYsWUFBVyxXQUFjLE9BQU9yQixFQUFRb0MsVUFBVyxJQUFVLFFBYWpFcEMsRUFBUXVCLGlCQUFpQixTQVh6QixXQUNJeEIsRUFBU3FDLFVBQVcsRUFDcEJwQyxFQUFRb0MsVUFBVyxFQUNuQmxDLEVBQUtpQyxjQVNUbEMsRUFBV3NCLGlCQUFpQixTQVA1QixXQUNJdkIsRUFBUW9DLFVBQVcsRUFDbkJyQyxFQUFTcUMsVUFBVyxFQUNwQmxDLEVBQUt5RCxjIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLy8gbWFpbiBnYW1lIGVsZW1lbnRcbnZhciBzY29yZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zY29yZV0nKTtcbnZhciBjdWJlU2NvcmVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY3ViZS1zY29yZV0nKTtcbnZhciBjdWJlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWN1YmVdJyk7XG52YXIga2V5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWtleV0nKTtcbnZhciBub3RpZmljYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1ub3RpZmljYXRpb25dJyk7XG4vLyBwcm9ncmVzIGJhcnIgZWxlbWVudFxudmFyIHByb2dyZXNzVG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcHJvZ3Jlc3MtdG9wXScpO1xudmFyIHByb2dyZXNzUmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1wcm9ncmVzcy1yaWdodF0nKTtcbnZhciBwcm9ncmVzc0xlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1wcm9ncmVzcy1sZWZ0XScpO1xudmFyIHByb2dyZXNzQm90dG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcHJvZ3Jlc3MtYm90dG9tXScpO1xuLy8gYnV0dG9uIGVsZW1lbnRcbnZhciBzdGFydEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXN0YXJ0XScpO1xudmFyIHN0b3BCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zdG9wXScpO1xudmFyIG5ld0dhbWVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uZXddJyk7XG52YXIgR2FtZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHYW1lKHNjb3JlRWxlbWVudCwgY3ViZVNjb3JlRWxlbWVudCwgY3ViZUVsZW1lbnQsIGtleUVsZW1lbnQsIHByb2dyZXNzQm90dG9tLCBwcm9ncmVzc0xlZnQsIHByb2dyZXNzVG9wLCBwcm9ncmVzc1JpZ2h0LCBzdGFydEJ0biwgc3RvcHRCdG4pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zY29yZUVsZW1lbnQgPSBzY29yZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuY3ViZVNjb3JlRWxlbWVudCA9IGN1YmVTY29yZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuY3ViZUVsZW1lbnQgPSBjdWJlRWxlbWVudDtcbiAgICAgICAgdGhpcy5rZXlFbGVtZW50ID0ga2V5RWxlbWVudDtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JvdHRvbSA9IHByb2dyZXNzQm90dG9tO1xuICAgICAgICB0aGlzLnByb2dyZXNzTGVmdCA9IHByb2dyZXNzTGVmdDtcbiAgICAgICAgdGhpcy5wcm9ncmVzc1RvcCA9IHByb2dyZXNzVG9wO1xuICAgICAgICB0aGlzLnByb2dyZXNzUmlnaHQgPSBwcm9ncmVzc1JpZ2h0O1xuICAgICAgICB0aGlzLnN0YXJ0QnRuID0gc3RhcnRCdG47XG4gICAgICAgIHRoaXMuc3RvcHRCdG4gPSBzdG9wdEJ0bjtcbiAgICAgICAgLy8gbWFpbiBnYW1lIHZhcmlhYmxlc1xuICAgICAgICB0aGlzLnNjb3JlID0gMTAwO1xuICAgICAgICB0aGlzLmludGVydmFsID0gMjAwMDtcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJzTGVuZ3RoID0gdGhpcy5jaGFyYWN0ZXJzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5yYW5kb21DaGFyYWN0ZXJzID0gJyc7XG4gICAgICAgIHRoaXMuaXNLZXlQcmVzcyA9IGZhbHNlO1xuICAgICAgICAvLyBpZGVudGlmeSB0aGUga2V5IHRoYXQgd2FzIHByZXNzZWRcbiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwcmVzc2VkS2V5ID0gZS5rZXk7XG4gICAgICAgICAgICB2YXIgc2hvd2VkQ2hhcmFjdGVycyA9IF90aGlzLnJhbmRvbUNoYXJhY3RlcnMudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChwcmVzc2VkS2V5ID09PSBzaG93ZWRDaGFyYWN0ZXJzKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZ2FuZXJhdGVQb2ludCh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmlzS2V5UHJlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF90aGlzLmdhbmVyYXRlUG9pbnQoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBzdGFydCB0ZXh0IGNvdW50aW5nXG4gICAgR2FtZS5wcm90b3R5cGUuY291bnRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gbm90aWZpY2F0aW9uLnRleHRDb250ZW50ID0gJzEnOyB9LCA1MDApO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vdGlmaWNhdGlvbi50ZXh0Q29udGVudCA9ICcyJzsgfSwgMTAwMCk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gbm90aWZpY2F0aW9uLnRleHRDb250ZW50ID0gJzMnOyB9LCAxNTAwKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIF90aGlzLnN1Ym1pdHRpbmcpO1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uLnRleHRDb250ZW50ID0gJ1N0YXJ0IHR5cGluZyEnO1xuICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBub3RpZmljYXRpb24udGV4dENvbnRlbnQgPSAnJzsgfSwgMzAwMCk7XG4gICAgfTtcbiAgICAvLyBwZXJmb3JtIGFuaW1hdGlvbiBldmVyeSAyIHNlY29uZHNcbiAgICBHYW1lLnByb3RvdHlwZS5jeWNsZVByb2dyZXNzQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmFuaW1hdGlvblRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuc3RhcnRBbmltYXRpb24oKTtcbiAgICAgICAgfSwgdGhpcy5pbnRlcnZhbCk7XG4gICAgfTtcbiAgICAvLyBnZXR0aW5nIHJhbmRvbSBjaGFyYWN0ZXJcbiAgICBHYW1lLnByb3RvdHlwZS5nZW5lcmF0ZUxldHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIHRoaXMuY2hhcmFjdGVyc0xlbmd0aCkgKyAxKTtcbiAgICAgICAgdGhpcy5yYW5kb21DaGFyYWN0ZXJzID0gdGhpcy5jaGFyYWN0ZXJzW2luZGV4IC0gMV07XG4gICAgICAgIGtleUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLnJhbmRvbUNoYXJhY3RlcnM7XG4gICAgfTtcbiAgICAvLyBjaGVja2luZyBjdXJyZW50IHNjb3JlXG4gICAgR2FtZS5wcm90b3R5cGUuY2hlY2tpbmdTY29yZSA9IGZ1bmN0aW9uIChjdXJyZW50U2NvcmUpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRTY29yZSA+PSAyMDAgfHwgY3VycmVudFNjb3JlIDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcEdhbWUoKTtcbiAgICAgICAgICAgIHNjb3JlRWxlbWVudC50ZXh0Q29udGVudCA9IGN1cnJlbnRTY29yZSA+PSAyMDAgPyAnWW91IFdpbiEnIDogJ1lvdSBMb3NlISc7XG4gICAgICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBzdG9wQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRDeWNsZSgpO1xuICAgIH07XG4gICAgLy8gc2V0dGluZyByYW5kb20gcG9pbnQgYW5kIGNoYW5nZSBjdWJlIHNpemVcbiAgICBHYW1lLnByb3RvdHlwZS5nYW5lcmF0ZVBvaW50ID0gZnVuY3Rpb24gKGlzQ29ycmVjdEtleSkge1xuICAgICAgICAvLyBpZiBwcmVzc2VkIHN1Y2Nlc3NmdWxseVxuICAgICAgICBpZiAoaXNDb3JyZWN0S2V5KSB7XG4gICAgICAgICAgICAvLyBnZW5lcmF0ZSByYW5kb20gbnVtYmVyXG4gICAgICAgICAgICB2YXIgbWluID0gNTtcbiAgICAgICAgICAgIHZhciBtYXggPSAxMDtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluKTtcbiAgICAgICAgICAgIC8vIGNoYW5naW5nIGN1YmUgc2l6ZSBcbiAgICAgICAgICAgIHRoaXMuc2NvcmUgPSB0aGlzLnNjb3JlICsgcG9pbnQ7XG4gICAgICAgICAgICBjdWJlRWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMuc2NvcmUgKyBcInB4XCI7XG4gICAgICAgICAgICBjdWJlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLnNjb3JlICsgXCJweFwiO1xuICAgICAgICAgICAgLy8gaW5zZXJ0aW5nIHRoaXMgYW1vdW50IGluIERPTVxuICAgICAgICAgICAgY3ViZVNjb3JlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiK1wiICsgcG9pbnQ7XG4gICAgICAgICAgICBzY29yZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiICsgdGhpcy5zY29yZTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tpbmdTY29yZSh0aGlzLnNjb3JlKTtcbiAgICAgICAgICAgIC8vIGlmIGZhaWwgdG8gcHJlc3NcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGdlbmVyYXRlIHJhbmRvbSBudW1iZXIgYmV0d2VlbiBtaW4gYW5kIG1heFxuICAgICAgICAgICAgdmFyIG1pbiA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBtYXggPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0tleVByZXNzKSB7XG4gICAgICAgICAgICAgICAgbWluID0gMjA7XG4gICAgICAgICAgICAgICAgbWF4ID0gMjU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtaW4gPSAxMDtcbiAgICAgICAgICAgICAgICBtYXggPSAxNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwb2ludCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluKTtcbiAgICAgICAgICAgIC8vIGNoYW5naW5nIGN1YmUgc2l6ZSBcbiAgICAgICAgICAgIHRoaXMuc2NvcmUgPSB0aGlzLnNjb3JlIC0gcG9pbnQ7XG4gICAgICAgICAgICBjdWJlRWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMuc2NvcmUgKyBcInB4XCI7XG4gICAgICAgICAgICBjdWJlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLnNjb3JlICsgXCJweFwiO1xuICAgICAgICAgICAgdGhpcy5pc0tleVByZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBpbnNlcnRpbmcgdGhpcyBhbW91bnQgaW4gRE9NXG4gICAgICAgICAgICBjdWJlU2NvcmVFbGVtZW50LnRleHRDb250ZW50ID0gXCItXCIgKyBwb2ludDtcbiAgICAgICAgICAgIHNjb3JlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCIgKyB0aGlzLnNjb3JlO1xuICAgICAgICAgICAgdGhpcy5jaGVja2luZ1Njb3JlKHRoaXMuc2NvcmUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBzdG9wcGluZyBhbmltYXRpb24gd2l0aCBsaXR0bGUgZGVsZXkgdG8gYXBwbHkgc3R5bGVzIGNvcnJlY3RseVxuICAgIEdhbWUucHJvdG90eXBlLnN0b3BBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHNldCB0cmFuc2l0aW9uIDAgc2Vjb25kIHRvIGRpc2FibGUgc21vb3RobmVzc1xuICAgICAgICBwcm9ncmVzc0JvdHRvbS5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnO1xuICAgICAgICBwcm9ncmVzc0xlZnQuc3R5bGUudHJhbnNpdGlvbiA9ICdub25lJztcbiAgICAgICAgcHJvZ3Jlc3NUb3Auc3R5bGUudHJhbnNpdGlvbiA9ICdub25lJztcbiAgICAgICAgcHJvZ3Jlc3NSaWdodC5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnO1xuICAgICAgICAvLyByZXR1cm4gdGhlIHByb2dyZXNzIGxpbmUgdG8gdGhlIGRlZmF1bHQgcG9zaXRpb25cbiAgICAgICAgcHJvZ3Jlc3NCb3R0b20uc3R5bGUud2lkdGggPSAnMCc7XG4gICAgICAgIHByb2dyZXNzTGVmdC5zdHlsZS5oZWlnaHQgPSAnMCc7XG4gICAgICAgIHByb2dyZXNzVG9wLnN0eWxlLndpZHRoID0gJzAnO1xuICAgICAgICBwcm9ncmVzc1JpZ2h0LnN0eWxlLmhlaWdodCA9ICcwJztcbiAgICAgICAgLy8gdHVybiBvbiBzbW9vdGhuZXNzXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcHJvZ3Jlc3NCb3R0b20uc3R5bGUudHJhbnNpdGlvbiA9ICcuNDhzIGFsbCBsaW5lYXInO1xuICAgICAgICAgICAgcHJvZ3Jlc3NMZWZ0LnN0eWxlLnRyYW5zaXRpb24gPSAnLjQ4cyBhbGwgbGluZWFyJztcbiAgICAgICAgICAgIHByb2dyZXNzVG9wLnN0eWxlLnRyYW5zaXRpb24gPSAnLjQ4cyBhbGwgbGluZWFyJztcbiAgICAgICAgICAgIHByb2dyZXNzUmlnaHQuc3R5bGUudHJhbnNpdGlvbiA9ICcuNDhzIGFsbCBsaW5lYXInO1xuICAgICAgICB9LCA0MCk7XG4gICAgfTtcbiAgICAvLyBzcnRpbmcgYW5pbWF0aW9uIGV2ZXJ5IHR3byBzZWNvbmRcbiAgICBHYW1lLnByb3RvdHlwZS5zdGFydEFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAga2V5RWxlbWVudC5jbGFzc0xpc3QucmVwbGFjZSgnaGlkZGVuJywgJ2FuaW1hdGVkJyk7XG4gICAgICAgIGtleUVsZW1lbnQuY2xhc3NMaXN0LnJlcGxhY2UoJ2hpZGRlbi1hbmltYXRlZCcsICdhbmltYXRlZCcpO1xuICAgICAgICAvLyBnYW5lcmF0ZSBjaGFyYWN0ZXJzIGV2ZXJ5IHR3byBzZWNvbmRcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUxldHRlcigpO1xuICAgICAgICAvLyBzdGFydCBwcm9ncmVzcyBiYXIgYW5pbWF0aW9ucyB3aXRoIGRlbGV5IGZvciBlYWNoIC8gYm90dG9tIGxpbmVcbiAgICAgICAgdGhpcy50aW1lckJvdHRvbSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcHJvZ3Jlc3NCb3R0b20uc3R5bGUud2lkdGggPSAnMTAwJSc7IH0sIDUwKTtcbiAgICAgICAgdGhpcy50aW1lcmxlZnQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb2dyZXNzTGVmdC5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7IH0sIDQ4MCk7XG4gICAgICAgIHRoaXMudGltZXJUb3AgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb2dyZXNzVG9wLnN0eWxlLndpZHRoID0gJzEwMCUnOyB9LCA5NjApO1xuICAgICAgICB0aGlzLnRpbWVyUmlnaHQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHByb2dyZXNzUmlnaHQuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICAgICAga2V5RWxlbWVudC5jbGFzc0xpc3QucmVwbGFjZSgnYW5pbWF0ZWQtb24tcHJlc3MnLCAnaGlkZGVuLWFuaW1hdGVkJyk7XG4gICAgICAgICAgICBrZXlFbGVtZW50LmNsYXNzTGlzdC5yZXBsYWNlKCdhbmltYXRlZCcsICdoaWRkZW4tYW5pbWF0ZWQnKTtcbiAgICAgICAgfSwgMTQ0MCk7XG4gICAgICAgIHRoaXMuZGlzYWJsZUFuaW1hdGlvbiA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgICAgICAgX3RoaXMuZ2FuZXJhdGVQb2ludChmYWxzZSk7XG4gICAgICAgIH0sIDE5MjApO1xuICAgIH07XG4gICAgLy8gY2xlYXQgYWxsIHRpbWVyIHRvIHN0YXJ0IG5ldyBjaWNsIGFuaW1hdGlvbiBvciBzdG9wIHRoZSBnYW1lXG4gICAgR2FtZS5wcm90b3R5cGUuc3RvcHBpbmdUaW1lcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5kaXNhYmxlQW5pbWF0aW9uKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmFuaW1hdGlvblRpbWVyKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyUmlnaHQpO1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXJUb3ApO1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXJsZWZ0KTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyQm90dG9tKTtcbiAgICB9O1xuICAgIC8vIHJlc3RhcnQgY3ljbGUgb2YgYW5pbWF0aW9uIHdoZSBrZXkgcHJlc3NlZFxuICAgIEdhbWUucHJvdG90eXBlLnJlc3RhcnRDeWNsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAga2V5RWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAvLyBzZXR0aW5nIHRoZSBzYW1lIGFuaW1hdGlvbiBidXQgd2l0aCBkaWZmZXJlbnQgYW5pbWF0aW9uIG5hbWUgdG8gY29ycmVjdGx5IHdvcmtcbiAgICAgICAgaWYgKGtleUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbmltYXRlZC1vbi1wcmVzcycpKSB7XG4gICAgICAgICAgICBrZXlFbGVtZW50LmNsYXNzTGlzdC5yZXBsYWNlKCdhbmltYXRlZC1vbi1wcmVzcycsICdhbmltYXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAga2V5RWxlbWVudC5jbGFzc0xpc3QucmVwbGFjZSgnYW5pbWF0ZWQnLCAnYW5pbWF0ZWQtb24tcHJlc3MnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0b3BBbmltYXRpb24oKTtcbiAgICAgICAgLy8gbmVlZGVkIGEgbGl0dGxlIGRlbGF5IGZvciBhbGwgc3R5bGVzIHRvIGJlIHNldCBpbiBvcmRlciBhbmQgd29yayBjb3JyZWN0bHlcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5zdG9wcGluZ1RpbWVycygpO1xuICAgICAgICAgICAgX3RoaXMuc3RhcnRBbmltYXRpb24oKTtcbiAgICAgICAgICAgIF90aGlzLmN5Y2xlUHJvZ3Jlc3NBbmltYXRpb24oKTtcbiAgICAgICAgfSwgNTApO1xuICAgIH07XG4gICAgR2FtZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY291bnRpbmcoKTtcbiAgICAgICAgdGhpcy5jeWNsZVByb2dyZXNzQW5pbWF0aW9uKCk7XG4gICAgICAgIG5vdGlmaWNhdGlvbi50ZXh0Q29udGVudCA9ICcnO1xuICAgIH07XG4gICAgR2FtZS5wcm90b3R5cGUuc3RvcEdhbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGtleUVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgbm90aWZpY2F0aW9uLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIHRoaXMuc3RvcHBpbmdUaW1lcnMoKTtcbiAgICAgICAgcHJvZ3Jlc3NCb3R0b20uc3R5bGUud2lkdGggPSAnMCc7XG4gICAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIHRoaXMuc3VibWl0dGluZyk7XG4gICAgfTtcbiAgICBHYW1lLnByb3RvdHlwZS5yZXN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNjb3JlID0gMTAwO1xuICAgICAgICBzY29yZUVsZW1lbnQudGV4dENvbnRlbnQgPSAnMTAwJztcbiAgICAgICAgY3ViZVNjb3JlRWxlbWVudC50ZXh0Q29udGVudCA9ICcwJztcbiAgICAgICAgY3ViZUVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMHB4XCI7XG4gICAgICAgIGN1YmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IFwiMTAwcHhcIjtcbiAgICAgICAgdGhpcy5zdG9wR2FtZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIEdhbWU7XG59KCkpO1xudmFyIGdhbWUgPSBuZXcgR2FtZShzY29yZUVsZW1lbnQsIGN1YmVTY29yZUVsZW1lbnQsIGN1YmVFbGVtZW50LCBrZXlFbGVtZW50LCBwcm9ncmVzc0JvdHRvbSwgcHJvZ3Jlc3NMZWZ0LCBwcm9ncmVzc1RvcCwgcHJvZ3Jlc3NSaWdodCwgc3RhcnRCdG4sIHN0b3BCdG4pO1xuZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgZ2FtZS5zdGFydCgpO1xuICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0b3BCdG4uZGlzYWJsZWQgPSBmYWxzZTsgfSwgMjAwMCk7XG59XG5mdW5jdGlvbiBzdG9wKCkge1xuICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgc3RvcEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgZ2FtZS5zdG9wR2FtZSgpO1xufVxuZnVuY3Rpb24gcmVzdGFydCgpIHtcbiAgICBzdG9wQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGdhbWUucmVzdGFydCgpO1xufVxuc3RhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFydCk7XG5zdG9wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RvcCk7XG5uZXdHYW1lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVzdGFydCk7XG4iXSwic291cmNlUm9vdCI6IiJ9